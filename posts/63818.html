<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="linux指令03, java,python,mysql,machine learning,hexo,HTML,CSS等"><meta name="description" content="我准备好啦,我准备好啦"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>linux指令03 | 路飞的小破站</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery.min.js"></script><script src="/js/autohidenav.js"></script><meta name="generator" content="Hexo 5.4.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="路飞的小破站" type="application/atom+xml"></head><style>body{background-image:url(https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/luffy19.png);background-repeat:no-repeat;background-size:cover;background-attachment:fixed}</style><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><div><img src="/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">路飞的小破站</span></div></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言墙</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-boxes" style="zoom:.6"></i> <span>杂物箱</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/world"><i class="fas fa-globe" style="margin-top:-20px;zoom:.6"></i> <span>world</span></a></li></ul></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">路飞的小破站</div><div class="logo-desc">我准备好啦,我准备好啦</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言墙</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-boxes"></i> 杂物箱 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/world" style="margin-left:75px"><i class="fa fas fa-globe" style="position:absolute;left:50px"></i> <span>world</span></a></li></ul></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/rick01.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">linux指令03</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/%E5%B9%B2%E8%B4%A7%E6%8C%87%E4%BB%A4/"><span class="chip bg-color">干货指令</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Linux/" class="post-category">Linux</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2021-11-19</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2021-11-19</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 6.6k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 23 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><link rel="stylesheet" href="/libs/prism/prism.css"><div class="card-content article-card-content"><div id="articleContent"><h2 id="apt包管理工具"><a href="#apt包管理工具" class="headerlink" title="apt包管理工具"></a>apt包管理工具</h2><h3 id="apt-get"><a href="#apt-get" class="headerlink" title="apt-get"></a>apt-get</h3><table><thead><tr><th>apt-get 包含的常用工具</th><th>说明</th></tr></thead><tbody><tr><td>install</td><td>其后加上软件包名，用于安装一个软件包</td></tr><tr><td>update</td><td>从软件源镜像服务器上下载/更新用于更新本地软件源的软件包列表</td></tr><tr><td>upgrade</td><td>升级本地可更新的全部软件包，但存在依赖问题时将不会升级，通常会在更新之前执行一次 <code>update</code></td></tr><tr><td>dist-upgrade</td><td>解决依赖关系并升级（存在一定危险性）</td></tr><tr><td>remove</td><td>移除已安装的软件包，包括与被移除软件包有依赖关系的软件包，但不包含软件包的配置文件</td></tr><tr><td>autoremove</td><td>移除之前被其他软件包依赖，但现在不再被使用的软件包</td></tr><tr><td>purge</td><td>与 remove 相同，但会完全移除软件包，包含其配置文件</td></tr><tr><td>clean</td><td>移除下载到本地的已经安装的软件包，默认保存在 <code>/var/cache/apt/archives/</code></td></tr><tr><td>autoclean</td><td>移除已安装的软件的旧版本软件包</td></tr></tbody></table><table><thead><tr><th>apt-get 常用参数</th><th>说明</th></tr></thead><tbody><tr><td>-y</td><td>自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用</td></tr><tr><td>-s</td><td>模拟安装</td></tr><tr><td>-q</td><td>静默安装方式，指定多个 <code>q</code> 或者 <code>-q=#</code>，<code>#</code> 表示数字，用于设定静默级别，这在你不想要在安装软件包时屏幕输出过多时很有用</td></tr><tr><td>-f</td><td>修复损坏的依赖关系</td></tr><tr><td>-d</td><td>只下载不安装</td></tr><tr><td>–reinstall</td><td>重新安装已经安装但可能存在问题的软件包</td></tr><tr><td>–install-suggests</td><td>同时安装 APT 给出的建议安装的软件包</td></tr></tbody></table><h3 id="apt-cache"><a href="#apt-cache" class="headerlink" title="apt-cache"></a>apt-cache</h3><p><code>sudo apt-cache search software1 software2 ...</code></p><p><code>apt-cache</code> 命令, 针对本地数据进行相关工作.</p><p><code>search</code> , 在本地数据库中搜索关于 software1, software2 … 相关软件的信息.</p><h2 id="dpkg"><a href="#dpkg" class="headerlink" title="dpkg"></a>dpkg</h2><blockquote><p>dpkg 是 Debian 软件包管理器的基础，它被伊恩·默多克创建于 1993 年。dpkg 与 RPM 十分相似，同样被用于安装、卸载和供给和 .deb 软件包相关的信息。</p></blockquote><blockquote><p>dpkg 本身是一个底层的工具。上层的工具，像是 APT，被用于从远程获取软件包以及处理复杂的软件包关系。”dpkg”是”Debian Package”的简写。</p></blockquote><table><thead><tr><th>dpkg常用参数</th><th>说明</th></tr></thead><tbody><tr><td>-i</td><td>安装指定deb包</td></tr><tr><td>-R</td><td>后面加上目录名, 用于安装该目录下的所有deb安装包</td></tr><tr><td>-r</td><td>remove, 移除某个已安装的软件包</td></tr><tr><td>-I</td><td>显示 deb 包文件的信息</td></tr><tr><td>-s</td><td>显示已安装软件的信息</td></tr><tr><td>-S</td><td>搜索已安装的软件包</td></tr><tr><td>-L</td><td>显示已安装软件包的目录信息</td></tr></tbody></table><ul><li>先使用apt-get 加上 -d 参数 下载 emacs 的deb包.</li></ul><p><code>sudo apt-get -d install -y emacs</code></p><ul><li>默认下载路径为 <code>/var/cache/apt/archives/</code>,</li></ul><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119084121738.png"></p><ul><li>将第一个 deb 文件 copy 到 home/usr/目录下.(使用 <code>cp</code> 命令).</li><li>查看deb包的信息</li></ul><p><code>sudo dpkg -I ....</code></p><ul><li>可以看到, 这个包还额外依赖了一些软件包，这意味着，如果主机目前没有这些被依赖的软件包，直接使用 dpkg 安装可能会存在一些问题，因为<code>dpkg</code>并不能为你解决依赖关系。</li><li>使用dpkg 安装</li></ul><p><code>sudo dpkg -i ...</code></p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119084533401.png"></p><p>果然, 出现错误, 安装失败.</p><ul><li><p>这个时候用 <code>apt-get -f</code>修复依赖关系的安装</p></li><li><p>安装成功.(好麻烦 😅😅😅)</p></li></ul><h3 id="二进制包安装"><a href="#二进制包安装" class="headerlink" title="二进制包安装"></a>二进制包安装</h3><p>二进制包的安装比较简单，我们需要做的只是将从网络上下载的二进制包解压后放到合适的目录，然后将包含可执行的主程序文件的目录添加进<code>PATH</code>环境变量即可.</p><h2 id="程序与进程"><a href="#程序与进程" class="headerlink" title="程序与进程"></a>程序与进程</h2><blockquote><p><strong>程序</strong>（procedure）：不太精确地说，程序就是执行一系列有逻辑、有顺序结构的指令，帮我们达成某个结果。就如我们去餐馆，给服务员说我要牛肉盖浇饭，她执行了做牛肉盖浇饭这么一个程序，最后我们得到了这么一盘牛肉盖浇饭。它需要去执行，不然它就像一本武功秘籍，放在那里等人翻看。</p></blockquote><blockquote><p><strong>进程</strong>（process）：进程是程序在一个数据集合上的一次执行过程，在早期的 UNIX、Linux 2.4 及更早的版本中，它是系统进行资源分配和调度的独立基本单位。同上一个例子，就如我们去了餐馆，给服务员说我要牛肉盖浇饭，她执行了做牛肉盖浇饭这么一个程序，而里面做饭的是一个进程，做牛肉汤汁的是一个进程，把牛肉汤汁与饭混合在一起的是一个进程，把饭端上桌的是一个进程。它就像是我们在看武功秘籍这么一个过程，然后一个篇章一个篇章地去练。</p></blockquote><p>简单来说，程序是为了完成某种任务而设计的软件，比如 vim 是程序。什么是进程呢？进程就是运行中的程序。</p><p>程序只是一些列指令的集合，是一个静止的实体，而进程不同，进程有以下的特性：</p><ul><li><strong>动态性</strong>: 进程的实质是一次程序执行的过程，有创建、撤销等状态的变化。而程序是一个静态的实体.</li><li><strong>并发性</strong>: 进程可以做到在一个时间段内，有多个程序在运行中。程序只是静态的实体，所以不存在并发性。</li><li><strong>独立性</strong>: 进程可以独立分配资源，独立接受调度，独立地运行。</li><li><strong>异步性</strong>: 进程以不可预知的速度向前推进。</li><li><strong>结构性</strong>: 进程拥有<strong>代码段</strong>、<strong>数据段</strong>、<strong>PCB（进程控制块，进程存在的唯一标志）</strong>。也正是因为有结构性，进程才可以做到独立地运行。</li></ul><blockquote><p><strong>并发</strong>: 在一个时间段内，宏观来看有多个程序都在活动，有条不紊的执行（每一瞬间只有一个在执行，只是在一段时间有多个程序都执行过)</p></blockquote><blockquote><p><strong>并行</strong>: 在每一个瞬间，都有多个程序都在同时执行，这个必须有多个 CPU 才行</p></blockquote><p>引入进程是因为传统意义上的程序已经不足以描述 OS 中各种活动之间的动态性、并发性、独立性还有相互制约性。程序就像一个公司，只是一些证书，文件的堆积（静态实体）。而当公司运作起来就有各个部门的区分，财务部，技术部，销售部等等，就像各个进程，各个部门之间可以独立运作，也可以有交互（独立性、并发性）。</p><p>而随着程序的发展越做越大，又会继续细分，从而引入了线程的概念，当代多数操作系统、Linux 2.6 及更新的版本中，进程本身不是基本运行单位，而是线程的容器。就像上述所说的，每个部门又会细分为各个工作小组（线程），而工作小组需要的资源需要向上级（进程）申请。</p><blockquote><p><strong>线程</strong>（thread）是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。因为线程中几乎不包含系统资源，所以执行更快、更有效率。</p></blockquote><p>简而言之，一个程序至少有一个进程，一个进程至少有一个线程。线程的划分尺度小于进程，使得多线程程序的并发性高。另外，进程在执行过程中拥有独立的内存单元，而多个线程共享内存，从而极大地提高了程序的运行效率。就如下图所示：</p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/shiyanlou1.jpg" alt="打比方"></p><h3 id="进程分类"><a href="#进程分类" class="headerlink" title="进程分类"></a>进程分类</h3><ul><li><h4 id="以进程的功能与服务的对象来分"><a href="#以进程的功能与服务的对象来分" class="headerlink" title="以进程的功能与服务的对象来分"></a>以进程的功能与服务的对象来分</h4><ul><li><strong>用户进程</strong>: 通过执行用户程序, 应用程序或称之为内核之外的系统程序而产生的进程, 此类进程可以在用户的控制下运行或关闭.</li><li><strong>系统进程</strong>: 通过执行系统内核程序而产生的进程, 比如可以执行内存资源分配和进程切换等相对底层的工作; 而且该进程的运行不受用户的干预, 即使是 root 用户也不能干预.</li></ul></li><li><h4 id="以应用程序的服务类型来分"><a href="#以应用程序的服务类型来分" class="headerlink" title="以应用程序的服务类型来分."></a>以应用程序的服务类型来分.</h4><ul><li><strong>交互进程</strong>: 由一个 shell 终端启动的进程，在执行过程中，需要与用户进行交互操作，可以运行于前台，也可以运行在后台。</li><li><strong>批处理进程</strong>: 该进程是一个进程集合，负责按顺序启动其他的进程</li><li><strong>守护进程</strong>: 守护进程是一直运行的一种进程，在 Linux 系统启动时启动，在系统关闭时终止。它们独立于控制终端并且周期性的执行某种任务或等待处理某些发生的事件。例如 httpd 进程，一直处于运行状态，等待用户的访问。还有经常用的 cron（在 centOS 系列为 crond）进程，这个进程为 crontab 的守护进程，可以周期性的执行用户设定的某些任务。</li></ul></li></ul><h3 id="进程的衍生"><a href="#进程的衍生" class="headerlink" title="进程的衍生"></a>进程的衍生</h3><blockquote><p><strong>fork-exec</strong>是由 Dennis M. Ritchie 创造的</p></blockquote><blockquote><p><strong>fork()</strong> 是一个系统调用（system call），它的主要作用就是为当前的进程创建一个新的进程，这个新的进程就是它的子进程，这个子进程除了父进程的返回值和 PID 以外其他的都一模一样，如进程的执行代码段，内存信息，文件描述，寄存器状态等等</p></blockquote><blockquote><p><strong>exec()</strong> 也是系统调用，作用是切换子进程中的执行程序也就是替换其从父进程复制过来的代码段与数据段</p></blockquote><p>子进程就是父进程通过系统调用 <code>fork()</code> 而产生的复制品，<code>fork()</code> 就是把父进程的 PCB 等进程的数据结构信息直接复制过来，只是修改了 PID，所以一模一样，只有在执行 <code>exec()</code> 之后才会不同，而早先的 <code>fork()</code> 比较消耗资源后来进化成 <code>vfork()</code>，效率高了不少.</p><h4 id="vfork"><a href="#vfork" class="headerlink" title="vfork()"></a>vfork()</h4><p><strong>vfork</strong>: 创建的子进程与父进程共享数据段,而且由vfork()创建的子进程将先于父进程运行(将父进程挂起, 除非子进程exit或者execve才会唤起父进程).</p><p>就这样, 先点到为止. 🥶🥶🥶</p><h4 id="🐄🐄🐄COW"><a href="#🐄🐄🐄COW" class="headerlink" title="🐄🐄🐄COW"></a>🐄🐄🐄<strong>COW</strong></h4><p><strong>写入时复制(Copy-on-write)</strong> 是一个被使用在程式设计领域的最佳化策略。其基础的观念是，如果有多个呼叫者(callers)同时要求相同资源，他们会共同取得相同的指标指向相同的资源，直到某个呼叫者(caller)尝试修改资源时，系统才会真正复制一个副本(private copy)给该呼叫者，以避免被修改的资源被直接察觉到，这过程对其他的呼叫只都是通透的(transparently)。此作法主要的优点是如果呼叫者并没有修改该资源，就不会有副本(private copy)被建立。</p><p>子进程的退出与资源的回收定然与父进程有很大的相关性。当一个子进程要正常的终止运行时，或者该进程结束时它的主函数 <code>main()</code> 会执行 <code>exit(n);</code> 或者 <code>return n</code>，这里的返回值 n 是一个信号，系统会把这个 <strong>SIGCHLD</strong> 信号传给其父进程，当然若是异常终止也往往是因为这个信号。</p><h4 id="僵尸进程"><a href="#僵尸进程" class="headerlink" title="僵尸进程"></a>僵尸进程</h4><p>在将要结束时的子进程代码执行部分已经结束执行了，系统的资源也基本归还给系统了，但若是其进程的进程控制块（PCB）仍驻留在内存中，而它的 PCB 还在，代表这个进程还存在（因为 PCB 就是进程存在的唯一标志，里面有 PID 等消息），并没有消亡，这样的进程称之为<strong>僵尸进程（Zombie）</strong>👹👹👹。</p><p>正常情况下, 父进程会收到两个返回值: <strong>exit code</strong>(<strong>SIGCHLD</strong>信号) 与 <code>reason for termination</code>. 之后，父进程会使用 <code>wait(&amp;status)</code> 系统调用以获取子进程的退出状态，然后内核就可以从内存中释放已结束的子进程的 <strong>PCB</strong>； 而如若父进程没有这么做的话，子进程的 <strong>PCB</strong> 就会一直驻留在内存中，一直留在系统中成为<strong>僵尸进程（Zombie）</strong>.</p><p>虽然僵尸进程是已经放弃了几乎所有内存空间，没有任何可执行代码，也不能被调度，在进程列表中保留一个位置，记载该进程的退出状态等信息供其父进程收集，从而释放它。但是 <strong>Linux</strong> 系统中能使用的 <strong>PID</strong> 是有限的，如果系统中存在有大量的僵尸进程，系统将会因为没有可用的 <strong>PID</strong> 从而导致不能产生新的进程。</p><h4 id="孤儿进程"><a href="#孤儿进程" class="headerlink" title="孤儿进程"></a>孤儿进程</h4><p>另外如果父进程结束（非正常的结束），未能及时收回子进程，子进程仍在运行，这样的子进程称之为<strong>孤儿进程</strong>🤡🤡🤡。在 <strong>Linux</strong> 系统中，<strong>孤儿进程</strong>一般会被 <strong>init 进程</strong>所 <code>“ 收养 ”</code> ，成为 init 的子进程。由 init 来做善后处理，所以它并不至于像僵尸进程那样无人问津，不管不顾，大量存在会有危害。</p><p><strong>进程 0</strong> 是系统引导时创建的一个特殊进程，也称之为<strong>内核初始化</strong>，其最后一个动作就是调用 <code>fork()</code> 创建出一个子进程运行 <code>/sbin/init</code> 可执行文件，而该进程就是 PID=1 的进程 1，而进程 0 就转为<strong>交换进程</strong>（也被称为<strong>空闲进程</strong>），<strong>进程 1 （init 进程）</strong>是第一个用户态的进程，再由它不断调用 fork() 来创建系统里其他的进程，所以它是所有进程的父进程或者祖先进程。同时它是一个守护程序，直到计算机关机才会停止。</p><blockquote><p>init 是 所有进程的父进程或祖先进程</p></blockquote><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119130627318.png" alt="pstree"></p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/shiyanlou2.jpg"></p><p><code>ps －fxo user,ppid,pid,pgid,command</code></p><p>执行该命令, 其中 <strong>pid</strong> 就是该进程的一个唯一编号, <strong>ppid</strong> 就是 该进程的父进程的 pid, <strong>command</strong> 表示的是该进程通过执行什么样的命令或者脚本而产生的.</p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119155621372.png" alt="ps -fxo"></p><h3 id="进程组与-Sessions"><a href="#进程组与-Sessions" class="headerlink" title="进程组与 Sessions"></a>进程组与 Sessions</h3><p>每一个进程都会是一个进程组的成员，而且这个进程组是唯一存在的，他们是依靠 <strong>PGID（process group ID）</strong>来区别的，而每当一个进程被创建的时候，它便会成为其父进程所在组中的一员。</p><h4 id="领导进程"><a href="#领导进程" class="headerlink" title="领导进程"></a>领导进程</h4><p>一般情况，进程组的 <strong>PGID</strong> 等同于进程组的<strong>第一个成员的 PID</strong>，并且这样的进程称为该进程组的<strong>领导者</strong>，也就是<strong>领导进程</strong>，进程一般通过使用 <code>getpgrp()</code> 系统调用来寻找其所在组的 PGID，<u>领导进程可以先终结</u>，此时进程组依然存在，并持有相同的 PGID，直到进程组中最后一个进程终结。</p><h4 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h4><p>与进程组类似，每当一个进程被创建的时候，它便会成为其父进程所在 <strong>Session</strong> 中的一员，每一个进程组都会在一个 <strong>Session</strong> 中，并且这个 <strong>Session</strong> 是唯一存在的.</p><p><strong>Session</strong>主要是针对一个 <strong>tty</strong> 建立, <strong>Session</strong> 中的每个进程都称为一个 <strong>工作(job)</strong>.</p><p>每个会话可以连接一个 终端. 当控制终端有输入输出时, 都传递给该会话的前台进程组.</p><p>Session 意义在于将多个jobs 囊括在一个中终端, 并取其中的一个 job 作为 <strong>前台</strong>, 来直接接受该终端的输入输出以及终端信号. 其他jobs 在<strong>后台</strong>运行.</p><h3 id="工作管理"><a href="#工作管理" class="headerlink" title="工作管理"></a>工作管理</h3><p>bash(Bourne-Again shell)支持工作控制（job control），而 sh（Bourne shell）并不支持。</p><p>终端只能管自己的 job, 不能插手其他终端的 job.</p><ul><li>通过 <strong>&amp;</strong> 让命令在 <strong>后台</strong> 运行.</li></ul><h4 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h4><p>​ 查看被停止并放置在后台的工作.</p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119162358836.png" alt="jobs"></p><p>第一列显示的是 后台job 的编号.</p><p><strong>+</strong> 表示最近(刚刚, 最后)被放置后台的 job, <strong>-</strong> 表示之前, 没有符号代表再之前.</p><h4 id="fg-jobnumber"><a href="#fg-jobnumber" class="headerlink" title="fg [%jobnumber]"></a>fg [%jobnumber]</h4><p>🐖: ubuntu 在 zsh 中 需要 %, 在bash 中不需要.</p><p>功能: 将后台的工作拿到前台来.</p><h4 id="bg-jobnumber"><a href="#bg-jobnumber" class="headerlink" title="bg [%jobnumber]"></a>bg [%jobnumber]</h4><p>运行后台指定的job.</p><h4 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h4><p><code>kill -signal %jobnumber</code></p><p>signal信号值 可以通过 <code>kill -l</code>列出所有信号值的名称.</p><table><thead><tr><th>常用 -signal</th><th>作用</th></tr></thead><tbody><tr><td>-1</td><td>重新读取参数运行, 类似于restart</td></tr><tr><td>-2</td><td>如同 ctrl+c 的操作退出.</td></tr><tr><td>-9</td><td>强制终止该任务</td></tr><tr><td>-15</td><td>正常的方式终止该任务</td></tr></tbody></table><p><code>kill -signal pid</code> 对pid对应的进程进行操作.</p><h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><p>实时查看系统的一些关键信息的变化.</p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119164037628.png" alt="top"></p><table><thead><tr><th>第一排信息</th><th>解释</th></tr></thead><tbody><tr><td>top</td><td>表示当前程序的名称</td></tr><tr><td>16:40:27</td><td>当前系统时间</td></tr><tr><td>up 726 days, 12:26</td><td>该机器启动了多久</td></tr><tr><td>1 user</td><td>当前系统只有1个用户</td></tr><tr><td>load average: 1.97, 2.98, 2.60</td><td>分别对应 1、5、15 分钟内 cpu 的平均负载</td></tr></tbody></table><p><strong>load average</strong> 在 wikipedia 中的解释是 the system load is a measure of the amount of work that a computer system is doing 也就是对当前 CPU 工作量的度量，具体来说也就是指运行队列的平均长度，也就是等待 CPU 的平均进程数相关的一个计算值。</p><p>假设我们的系统是单 CPU、单内核的，把它比喻成是一条单向的桥，把 CPU 任务比作汽车。</p><ul><li>load = 0 的时候意味着这个桥上并没有车，cpu 没有任何任务；</li><li>load &lt; 1 的时候意味着桥上的车并不多，一切都还是很流畅的，cpu 的任务并不多，资源还很充足；</li><li>load = 1 的时候就意味着桥已经被车给占满了，没有一点空隙，cpu 已经在全力工作了，所有的资源都被用完了，当然还好，这还在能力范围之内，只是有点慢而已；</li><li>load &gt; 1 的时候就意味着不仅仅是桥上已经被车占满了，就连桥外都被占满了，cpu 已经在全力工作，系统资源的用完了，但是还是有大量的进程在请求，在等待。若是这个值大于 2 表示进程请求超过 CPU 工作能力的 2 倍。而若是这个值大于 5 说明系统已经在超负荷运作了。</li></ul><p>这是单个 CPU 单核的情况，而实际生活中我们需要将得到的这个值除以我们的核数来看。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#查看物理 CPU 的个数 </span>

<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"physical id"</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token operator">|</span><span class="token function">wc</span> -l 

<span class="token comment">#每个 cpu 的核心数 </span>

<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"physical id"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"0"</span> <span class="token operator">|</span> <span class="token function">wc</span> -l<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过上面的指数我们可以得知 load 的临界值为 1 ，但是在实际生活中，比较有经验的运维或者系统管理员会将临界值定为 0.7。这里的指数都是除以核心数以后的值，不要混淆了</p><ul><li>load &lt; 0.7 不予理会😏</li><li>0.7 &lt; load &lt; 1 稍微关注一下, 可以应付.😬</li><li>load = 1 警惕, 没有更多资源, CPU已在全力以赴啦🤢</li><li>load &gt; 5 系统快崩啦🤮</li></ul><p>来看top 的第二排.</p><table><thead><tr><th>第二排</th><th>解释</th></tr></thead><tbody><tr><td>Tasks: 27 total</td><td>进程总数</td></tr><tr><td>1 running</td><td>1个正在运行的进程</td></tr><tr><td>25 sleeping</td><td>25个睡眠的进程</td></tr><tr><td>1 stopped</td><td>1个停止的进程</td></tr><tr><td>0 zombie</td><td>没有僵尸进程</td></tr></tbody></table><table><thead><tr><th>第三排</th><th>解释</th></tr></thead><tbody><tr><td>%Cpu(s): 3.9 <strong>us</strong></td><td>用户空间进程占用CPU %</td></tr><tr><td>1.1 <strong>sy</strong></td><td>内核空间运行占用CPU %</td></tr><tr><td>0.0 <strong>ni</strong></td><td>用户进程空间内改变过优先级的进程占用CPU %</td></tr><tr><td>94.4 <strong>id</strong></td><td>空闲CPU %</td></tr><tr><td>0.0 <strong>wa</strong></td><td>等待输入输出的CPU 时间 %</td></tr><tr><td>0.0 <strong>hi</strong></td><td>硬中断(HardWare IRQ)占用CPU %</td></tr><tr><td>0.1 <strong>si</strong></td><td>软中断(SoftWare IRQ)占用CPU %</td></tr><tr><td>0.0 <strong>st</strong></td><td>(Steal time) 是 hypervisor 等虚拟服务中，虚拟 CPU 等待实际 CPU 的时间的 %</td></tr></tbody></table><p>CPU 利用率是对一个时间段内 CPU 使用状况的统计，通过这个指标可以看出在某一个时间段内 CPU 被占用的情况，而 Load Average 是 CPU 的 Load，它所包含的信息不是 CPU 的使用率状况，而是在一段时间内 CPU 正在处理以及等待 CPU 处理的进程数情况统计信息，这两个指标并不一样。</p><table><thead><tr><th>第四排 KiB Mem内存区</th><th>解释</th></tr></thead><tbody><tr><td>16425136 total</td><td>物理内存总量</td></tr><tr><td>1625452 free</td><td>空闲内存总量</td></tr><tr><td>6686168 used</td><td>使用的物理内存总量</td></tr><tr><td>8113516 buffers</td><td>用作内核缓存的内存量</td></tr></tbody></table><p>🐖: 系统中可用的物理内存最大值并不单单是free, 而是 free + buffers + swap中的cached的和.</p><table><thead><tr><th>第五排 KiB Swap交换区</th><th>解释</th></tr></thead><tbody><tr><td>total</td><td>物理内存总量</td></tr><tr><td>free</td><td>空闲内存总量</td></tr><tr><td>used</td><td>使用的物理内存总量</td></tr><tr><td>cached</td><td>缓冲的交换区总量，内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖</td></tr></tbody></table><p>再下面就是 进程 的 情况.</p><table><thead><tr><th>列名</th><th>解释</th></tr></thead><tbody><tr><td>PID</td><td>进程id</td></tr><tr><td>USER</td><td>该进程的所属用户</td></tr><tr><td>PR</td><td>该进程执行的优先级 priority值</td></tr><tr><td>NI</td><td>该进程的 nice 值</td></tr><tr><td>VIRT</td><td>该进程任务所使用的虚拟内存的总数</td></tr><tr><td>RES</td><td>驻留内存数, 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA</td></tr><tr><td>SHR</td><td>该进程共享内存的大小 单位kb</td></tr><tr><td>S</td><td>进程状态 S = sleep睡眠 R = running运行 Z = zombie僵尸进程 D=不可中断的睡眠状态 T=跟踪/停止</td></tr><tr><td>%CPU</td><td>该进程 CPU 的利用率</td></tr><tr><td>%MEM</td><td>该进程内存的利用率</td></tr><tr><td>TIME+</td><td>该进程活跃的总时间</td></tr><tr><td>COMMAND</td><td>该进程运行的名字</td></tr></tbody></table><h4 id="NICE值"><a href="#NICE值" class="headerlink" title="NICE值"></a>NICE值</h4><p>叫做 <strong>静态优先级</strong>, 是用户空间的一个优先级值, 其取值范围是 <strong>-20~19</strong>.</p><p>值越小, 优先级越高; 值越大, 优先级越低. 默认值为 0.</p><h4 id="PR值"><a href="#PR值" class="headerlink" title="PR值"></a>PR值</h4><p>Priority值, 叫<strong>动态优先级</strong>, 是进程在内核中实际的优先级值, 进程优先级的取值范围是通过一个宏定义的, 这个宏的名称是 <code>MAX_PRIO</code>, 它的值为 <strong>140</strong>. Linux实际上实现了140个优先级范围, 取值范围是 <strong>0-139</strong>, 这个值越小, 优先级越高. 而这其中的 <strong>0-99</strong> 是实时进程的值, 而 <strong>100-139</strong> 是给用户的.</p><p>其中 PR 中的 <code>100 to 139</code> 值部分有这么一个对应 <code>PR = 20 + (-20 to +19)</code>，这里的 <code>-20 to +19</code> 便是 nice 值，所以说两个虽然都是优先级，而且有千丝万缕的关系，但是他们的值，他们的作用范围并不相同。</p><h4 id="VIRT"><a href="#VIRT" class="headerlink" title="VIRT"></a>VIRT</h4><p><strong>VIRT</strong> 任务所使用的虚拟内存的总数，其中包含所有的代码，数据，共享库和被换出 swap 空间的页面等所占据空间的总数。</p><table><thead><tr><th>top常用交互命令</th><th>解释</th></tr></thead><tbody><tr><td>q</td><td>退出程序</td></tr><tr><td>I</td><td>切换显示平均负载和启动时间的信息</td></tr><tr><td>P</td><td>根据CPU使用百分比大小进行排序</td></tr><tr><td>M</td><td>根据驻留内存大小进行排序</td></tr><tr><td>i</td><td>忽略闲置和僵死的进程, 这是一个开关式命令</td></tr><tr><td>k</td><td>终止一个进程, 系统提示输入PID及发送的信号值. 一般终止进程用 15 信号, 不能正常结束则使用 9 信号. 安全模式下该命令被屏蔽.</td></tr></tbody></table><h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119172927550.png" alt="ps aux"></p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119172955501.png" alt="ps axjf"></p><table><thead><tr><th>内容</th><th>解释</th></tr></thead><tbody><tr><td>F</td><td>进程的标志（process flags），当 flags 值为 1 则表示此子程序只是 fork 但没有执行 exec，为 4 表示此程序使用超级管理员 root 权限</td></tr><tr><td>USER</td><td>拥有该进程的用户</td></tr><tr><td>PID</td><td>进程ID</td></tr><tr><td>PPID</td><td>父进程的ID</td></tr><tr><td>SID</td><td>Session的ID</td></tr><tr><td>TPGID</td><td>前台进程组的ID</td></tr><tr><td>%CPU</td><td>进程占用CPU百分比</td></tr><tr><td>%MEM</td><td>占用内存的百分比</td></tr><tr><td>NI</td><td>进程的NICE值</td></tr><tr><td>VSZ</td><td>进程使用虚拟内存大小</td></tr><tr><td>RSS</td><td>驻留内存中页的大小</td></tr><tr><td>TTY</td><td>终端ID</td></tr><tr><td>S or STAT</td><td>进程状态</td></tr><tr><td>WCHAN</td><td>正在等待的进程资源</td></tr><tr><td>START</td><td>启动进程的时间</td></tr><tr><td>TIME</td><td>进程消耗CPU的时间</td></tr><tr><td>COMMAND</td><td>命令的名称和参数</td></tr></tbody></table><p>🐖: <strong>TPGID</strong>栏写着-1 的都是没有控制终端的进程，也就是守护进程</p><table><thead><tr><th>STAT进程状态</th><th>解释</th></tr></thead><tbody><tr><td>R</td><td>Running.运行中</td></tr><tr><td>S</td><td>Interruptible Sleep.等待调用</td></tr><tr><td>D</td><td>Uninterruptible Sleep.不可中继睡眠</td></tr><tr><td>T</td><td>Stoped.暂停或者跟踪状态</td></tr><tr><td>X</td><td>Dead.即将被撤销</td></tr><tr><td>Z</td><td>Zombie.僵尸进程</td></tr><tr><td>W</td><td>Paging.内存交换</td></tr><tr><td>N</td><td>优先级低的进程</td></tr><tr><td>&lt;</td><td>优先级高的进程</td></tr><tr><td>s</td><td>进程的领导者</td></tr><tr><td>L</td><td>锁定状态</td></tr><tr><td>l</td><td>多线程状态</td></tr><tr><td>+</td><td>前台进程</td></tr></tbody></table><blockquote><p>其中的 D 是不能被中断睡眠的状态，处在这种状态的进程不接受外来的任何 signal，所以无法使用 kill 命令杀掉处于 D 状态的进程，无论是 <code>kill</code>，<code>kill -9</code> 还是 <code>kill -15</code>，一般处于这种状态可能是进程 I/O 的时候出问题了。</p></blockquote><h4 id="ps-常用参数"><a href="#ps-常用参数" class="headerlink" title="ps 常用参数"></a>ps 常用参数</h4><p><code>ps -l</code> 可以显示自己这次登录的 bash 相关的进程信息罗列出来.</p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119174029283.png" alt="ps -l"></p><p>前面用的 <code>ps aux</code>罗列出了所有的进程信息.</p><p>结合之前学习的 隧道, 配合 grep 和 正则表达式一起使用, 实现对某个进程的查找.</p><p><code>ps aux | grep zsh</code></p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119174240575.png" alt="查找进程"></p><p><code>ps axjf</code> : 查看时，将连同部分的进程呈树状显示出来.</p><p><code>ps -afxo user,ppid,pid,pgid,command</code> 将想要查看的信息放在一起.</p><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119174509061.png"></p><h3 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h3><p>很直接的看到相同的进程数量，最主要的还是我们可以看到所有进程之间的相关性。</p><table><thead><tr><th>pstree 参数</th><th>解释</th></tr></thead><tbody><tr><td>-A</td><td>程序树之间以 ASCII 字符连接</td></tr><tr><td>-p</td><td>同时列出每个 process 的 PID</td></tr><tr><td>-u</td><td>同时列出每个 process 的所属用户名称</td></tr></tbody></table><h3 id="kill-PID"><a href="#kill-PID" class="headerlink" title="kill PID"></a>kill PID</h3><p><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/wait0.png" data-original="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/image-20211119175128048.png" alt="kill gedit"></p><p>如上图, 先打开gedit 文本编辑器, 查看相关进程, 注意到一个 PID 为 662 的进程,</p><p>使用 kill -9 662 (使用 9 这个信号强制结束). 可以发现, gedit窗口直接关闭, 再查看相关进程, 已经不在了. 👹👹👹</p><p>这<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/courses/1/learning/?id=1944">蓝桥云课</a>教程太硬核了.🥶🥶🥶</p><p>再次诠释了入门到放弃…🦒🐷🐵</p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者: </i></span><span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">路飞</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://luffyblog.top/posts/63818.html">https://luffyblog.top/posts/63818.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">路飞</a> !</span></div></div><script async defer>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",(function(t){M.toast({html:'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>'})}))</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/%E5%B9%B2%E8%B4%A7%E6%8C%87%E4%BB%A4/"><span class="chip bg-color">干货指令</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="facebook,google,qq,wechat,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">您的赏识是俺前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$((function(){$(".tabs").tabs()}))</script></div></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/posts/58929.html"><div class="card-image"><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/craw210.png" class="responsive-img" alt="ubuntu虚拟机安装"> <span class="card-title">ubuntu虚拟机安装</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-11-23 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Linux/" class="post-category">Linux</a></span></div></div><div class="card-action article-tags"><a href="/tags/ubuntu/"><span class="chip bg-color">ubuntu</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/14731.html"><div class="card-image"><img src="https://luffyblogimg.oss-cn-beijing.aliyuncs.com/image/rick17.jpg" class="responsive-img" alt="linux指令02"> <span class="card-title">linux指令02</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-11-19 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Linux/" class="post-category">Linux</a></span></div></div><div class="card-action article-tags"><a href="/tags/%E5%B9%B2%E8%B4%A7%E6%8C%87%E4%BB%A4/"><span class="chip bg-color">干货指令</span></a></div></div></div></div></article><script src="//cdn.jsdelivr.net/npm/@waline/client"></script><div id="waline"></div><script>new Waline({el:"#waline",serverURL:"https://blog-api-dusky-nine.vercel.app/",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq"],avatar:"monsterid",visitor:!0})</script></div><script>$("#articleContent").on("copy",(function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("100"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"===n.getRangeAt(0).commonAncestorContainer.nodeName&&(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: 路飞的小破站<br />文章作者: 路飞<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout((function(){t.removeChild(o)}),200)}}}))</script><script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$((function(){tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingsOffset:-(.4*$(window).height()-45),collapseDepth:Number("0"),headingSelector:"h2, h3, h4"});let t=0;$("#toc-content a").each((function(){$(this).attr("href","#toc-heading-"+ ++t)})),t=0,$("#articleContent").children("h2, h3, h4").each((function(){$(this).attr("id","toc-heading-"+ ++t)}));let e=parseInt(.4*$(window).height()-64),n=$(".toc-widget");$(window).scroll((function(){$(window).scrollTop()>e?n.addClass("toc-fixed"):n.removeClass("toc-fixed")}));let o=$("#toc-aside"),i=$("#main-content");$("#floating-toc-btn .btn-floating").click((function(){o.hasClass("expanded")?(o.removeClass("expanded").hide(),i.removeClass("l9")):(o.addClass("expanded").show(),i.addClass("l9")),function(t,e){let n=$("#"+t);if(0===n.length)return;let o=n.width();o+=o>=450?21:o>=350&&o<450?18:o>=300&&o<350?16:14,$("#"+e).width(o)}("artDetail","prenext-posts")}))}))</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2021</span> <span id="year">2021</span> <a href="/about" target="_blank">路飞</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">23.6k</span>&nbsp;字 |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次 |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人<br><span id="sitetime">载入运行时间...</span><script>function siteTime(){var e=864e5,t=new Date,n=t.getFullYear(),o=t.getMonth()+1,r=t.getDate(),a=t.getHours(),i=t.getMinutes(),l=t.getSeconds(),m=Date.UTC("2021","10","24","6","55","36"),M=Date.UTC(n,o,r,a,i,l)-m,g=Math.floor(M/31536e6),d=Math.floor(M/e-365*g),s=Math.floor((M-(365*g+d)*e)/36e5),u=Math.floor((M-(365*g+d)*e-36e5*s)/6e4),T=Math.floor((M-(365*g+d)*e-36e5*s-6e4*u)/1e3);"2021"==n?(document.getElementById("year").innerHTML=n,document.getElementById("sitetime").innerHTML="小破站已安全运行 "+d+" 天 "+s+" 小时 "+u+" 分钟 "+T+" 秒"):(document.getElementById("year").innerHTML="2021 - "+n,document.getElementById("sitetime").innerHTML="小破站已安全运行 "+g+" 年 "+d+" 天 "+s+" 小时 "+u+" 分钟 "+T+" 秒")}setInterval(siteTime,1e3)</script><br><span id="icp"><img src="/medias/icp.png" style="vertical-align:text-bottom"> <a href="https://beian.miit.gov.cn/#/Integrated/recordQuery" target="_blank">豫ICP备2021032120号</a></span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/OnlyLuffy" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:319377758@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=319377758" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 319377758" data-position="top" data-delay="50"><i class="fab fa-qq"></i> </a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$((function(){!function(t,e,r){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var n=$("entry",t).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get(),a=document.getElementById(e),s=document.getElementById(r);a.addEventListener("input",(function(){var t='<ul class="search-result-list">',e=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length<=0||(n.forEach((function(r){var n=!0,a=r.title.trim().toLowerCase(),s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=r.url;i=0===i.indexOf("/")?r.url:"/"+i;var l=-1,c=-1,u=-1;if(""!==a&&""!==s&&e.forEach((function(t,e){l=a.indexOf(t),c=s.indexOf(t),l<0&&c<0?n=!1:(c<0&&(c=0),0===e&&(u=c))})),n){t+="<li><a href='"+i+"' class='search-result-title'>"+a+"</a>";var o=r.content.trim().replace(/<[^>]+>/g,"");if(u>=0){var h=u-20,f=u+80;h<0&&(h=0),0===h&&(f=100),f>o.length&&(f=o.length);var m=o.substr(h,f);e.forEach((function(t){var e=new RegExp(t,"gi");m=m.replace(e,'<em class="search-keyword">'+t+"</em>")})),t+='<p class="search-result">'+m+"...</p>"}t+="</li>"}})),t+="</ul>",s.innerHTML=t)}))}})}("/search.xml","searchInput","searchResult")}))</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script type="text/javascript" color="242, 49, 74" pointcolor="141, 0, 207" opacity="0.9" zindex="-1" count="56" src="/libs/background/canvas-nest.js"></script><script src="/libs/instantpage/instantpage.js" type="module"></script><script type="text/javascript">var windowWidth=$(window).width();if(windowWidth>768){var script=document.createElement("script");script.src="/js/sakura.js",document.write(script.outerHTML)}</script><script type="text/javascript">var script=document.createElement("script");script.src="/js/lihua.js",document.write(script.outerHTML)</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",(function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach((function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)}))}))</script><script>!function(t){t.imageLazyLoadSetting.processImages=o;var e=t.imageLazyLoadSetting.isSPA,n=t.imageLazyLoadSetting.preloadRatio||1,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var o,a=0;a<i.length;a++)0<=(o=(o=i[a]).getBoundingClientRect()).bottom&&0<=o.left&&o.top<=(t.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,o,r=i[a];t=r,e=function(){i=i.filter((function(t){return r!==t}))},n=new Image,o=t.getAttribute("data-original"),n.onload=function(){t.src=o,e&&e()},t.src!==o&&(n.src=o)}()}o(),t.addEventListener("scroll",(function(){var e,n;e=o,n=t,clearTimeout(e.tId),e.tId=setTimeout((function(){e.call(n)}),500)}))}(this)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/shizuku.model.json"},display:{position:"right",width:160,height:280},mobile:{show:!0},react:{opacity:.8}})</script></body></html>